{% extends webapp_config['LAYOUT'] %}

{% block meta_copydoc %}{% endblock %}

{% block meta_title %}Install {{ snap_title }} on {{ distro_name }} using the Snap Store | Snapcraft{% endblock %}

{% block meta_description %}Get the latest version of {{ snap_title }} for on {{ distro_name }} - {{ summary }}{% endblock %}

{% if icon_url %}
  {% block meta_image %}
    {{ icon_url }}
  {% endblock %}
{% endif %}

{% block meta_schema %}
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "{{ snap_title }}",
      "description": "{{ summary }}",
      "datePublished": "{{ last_updated_raw }}",
      {% if screenhots and screenshots|length > 0 %}
      "screenshot": "{{ screenshots[0] }}",
      {% endif %}
      "image": "{{ icon_url }}",
      "operatingSystem": "Linux, {{ distro_name }} ",
      "offers": {
        "price": {% if prices and prices['USD'] %}{{ prices['USD'] }}{% else %}0.00{% endif %},
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Person",
        "name": "{{ publisher }}"
        {% if website %}, {# the , is within the if to avoid parsing errors #}
        "url": "{{ website }}"
        {% endif %}
      },
      "softwareVersion": "{{ version }}",
      "fileSize": "{{ filesize }}",
      "license": "{{ license }}"
    }
  </script>
{% endblock %}

{% block content %}
  <section class="p-strip--light distro-banner u-no-padding--top">
    <div class="distro-banner__background">
      <svg class="distro-banner__suru" viewBox="0 0 1440 776" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <defs>
          <linearGradient x1="100%" y1="50%" x2="0%" y2="50%" id="b">
            <stop stop-color="{{ distro_color_1 }}" offset="0%"/>
            <stop stop-color="{{ distro_color_2 }}" offset="100%"/>
          </linearGradient>
          <path id="a" d="M0 0h1440v776H0z"/>
          <linearGradient x1="100%" y1="50%" x2="0%" y2="50%" id="c">
            <stop stop-color="{{ distro_color_2 }}" offset="0%"/>
            <stop stop-color="{{ distro_color_1 }}" offset="100%"/>
          </linearGradient>
        </defs>
        <g fill="none" fill-rule="evenodd">
          <mask id="d" fill="#fff"><use xlink:href="#a"/></mask>
          <use fill="url(#b)" xlink:href="#a"/>
          <path fill="url(#c)" mask="url(#d)" d="M0 169l295 607H0V169L1440 0v776H703l737-432V0z"/>
        </g>
      </svg>
      <div class="row">
        <div class="mobile-col-2 col-8"></div>
        <div class="mobile-col-2 col-4">
          <img src="{{ distro_logo }}" />
        </div>
      </div>
    </div>
    <div class="p-strip">
      <div class="row">
        <h1 class="p-heading--two u-no-margin">How to install {{ snap_title }}<br/> on <b>{{ distro_name }}</b></h1>
      </div>
    </div>

    <div class="row">
      <div class="p-card">
        <div class="row">
          <div class="details-block">
            <div class="p-snap-heading">
              {% if icon_url %}
                <img class="p-snap-heading__icon" src="{{ icon_url }}" alt="{{ snap_title }} snap" data-live="icon" />
              {% else %}
                <img class="p-snap-heading__icon" src="https://assets.ubuntu.com/v1/be6eb412-snapcraft-missing-icon.svg" alt="" data-live="icon" />
              {% endif %}
              <div class="p-snap-heading__title">
                <h2 class="p-heading--two p-snap-heading__name" data-live="title">{{ snap_title }}</h2>
                <div class="u-hide u-show--small">
                  {% include 'store/_snap-header-information.html' %}
                </div>
                <ul class="p-inline-list--middot">
                  <li class="p-inline-list__item u-hide--small">
                    {% include 'store/_snap-header-information.html' %}
                  </li>
                  {% for category in categories %}<li class="p-inline-list__item">
                    <a href="/search?category={{category.slug}}">{{ category.name }}</a>
                  </li>{% endfor %}
                </ul>
              </div>

              <div class="p-snap-install-buttons">
                <a class="p-button--positive p-snap-install-buttons__install" href="#install">
                  Install
                </a>
              </div>

            </div>
          </div>
        </div>

        {% if screenshots or videos %}
          <div class="row" id="js-snap-screenshots" data-live="screenshots">
            <div class="details-block">
              {% if videos %}
                {% include "partials/_snap-details-video-layout.html" %}
              {% elif screenshots %}
                {% include "partials/_snap-details-image-layout.html" %}
              {% endif %}
            </div>
          </div>
        {% endif %}

        <div class="row">
          <div class="col-8">
            {% if summary %}<h4 data-live="summary">{{ summary }}</h4>{% endif %}
            <div data-live="description">{{ description | safe }}</div>
          </div>
          <div class="col-4">
            <h4>Details for {{ snap_title }}</h4>
            <dl>
              <dt>License</dt>
              <dd data-live="license">{{ license }}</dd>
              <dt>Last updated</dt>
              <dd>{{ last_updated }}</dd>
            </dl>
          </div>
        </div>

      </div>

      <div id="install" class="p-card">
        <div class="row">
          <div class="col-10">
          <h2>Snap install instructions for {{ distro_name }}</h2>
          <p>Snaps are applications packaged with all their dependencies to run on all popular Linux distributions from a single build. They update automatically and roll back gracefully.</p>
          <p>Snaps are discoverable and installable from the <a href="/store">Snap Store</a>, an app store with an audience of millions.</p>
          </div>
          <div class="u-hide--mobile col-2">
            <img src="{{ distro_logo }}" />
          </div>
        </div>
        <div class="row">
          <h3>Enable snapd</h3>
        </div>
        {% for step in distro_install_steps %}
        <div class="row">
          <div class="col-7">
            <p>{{ step.action|safe }}</p>
          </div>
          {% if step.command %}
            <div class="col-5">
              {% set snippet_value = step.command %}
              {% set snippet_id = "distro-install-command-" + loop.index|string %}
              {% if step.command.count('\n') == 0 %}
                {% include "/partials/_code-snippet.html" %}
              {% else %}
                {% include "/partials/_code-snippet-multi.html" %}
              {% endif %}
            </div>
          {% endif %}
        </div>
        {% endfor %}
        <div class="row">
          <h3>Install {{ snap_title }}</h3>
        </div>
        <div class="row">
          <div class="col-7">
            <p>To install a snap, simply use the following command:</p>
          </div>
          <div class="col-5">
            {% set snippet_value = "sudo snap install " + package_name %}
            {% set snippet_id =  "snap-install-stable" %}
            {% include "/partials/_code-snippet.html" %}
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="p-strip is-shallow">
    <div class="row">
        <h2 class="u-float--left">Find more popular snaps</h2>
        <a href="/search?category=featured" class="p-button--neutral u-float--right u-hide--small p-featured-snap__see-more">See more...</a>
    </div>
    <div class="row">
      {% set snaps = featured_snaps %}
      {% set category = "featured" %}
      {% set show_summary = True %}
      {% include "store/_category-partial.html" %}
    </div>
    <div class="row u-hide--medium u-hide--large">
      <a href="/search?category=featured" class="p-button--neutral u-float--right">See more in Featured</a>
    </div>
  </section>

  {# templates #}
  {% set video = {'type': 'youtube', 'url': '${url}', 'id': '${id}'} %}
  <script type="text/template" id="video-youtube-template">
    {% include 'partials/_video.html' %}
  </script>
  {% set video = {'type': 'vimeo', 'url': '${url}', 'id': '${id}'} %}
  <script type="text/template" id="video-vimeo-template">
    {% include 'partials/_video.html' %}
  </script>
  {% set video = {'type': 'asciinema', 'url': '${url}', 'id': '${id}'} %}
  <script type="text/template" id="video-asciinema-template">
    {% include 'partials/_video.html' %}
  </script>
{% endblock %}

{% block scripts_modules %}
  <script src="{{ static_url('js/modules/clipboard.min.js') }}"></script>
{% endblock %}

{% block scripts %}
  <script src="{{ static_url('js/dist/public.js') }}"></script>
  <script>
    Raven.context(function () {
      try {
        snapcraft.public.screenshots('#js-snap-screenshots');
      } catch(e) {
        Raven.captureException(e);
      }

      try {
        snapcraft.public.videos('.js-video-slide');
      } catch(e) {
        Raven.captureException(e);
      }

      if (typeof ClipboardJS !== 'undefined') {
        new ClipboardJS('.js-clipboard-copy');
      }
    });
  </script>
{% endblock %}
