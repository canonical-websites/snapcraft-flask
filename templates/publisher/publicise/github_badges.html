{% set publicise_page="badges" %}
{% extends "publisher/publicise/_publisher_publicise_layout.html" %}

{% block publicise_content %}
  <div class="row">
    <h4>Promote your snap using embeddable GitHub badge</h4>
  </div>

  <div class="row">
    <div class="col-2">
      Display:
    </div>
    <div class="col-7" id="js-options">
        <input type="checkbox" name="show-channel" id="option-show-channel" checked>
        <label for="option-show-channel">
          Stable channel from default track
        </label>
        <input type="checkbox" name="show-trending" id="option-show-trending" {% if trending %}checked{% endif %}>
        <label for="option-show-trending">
          Trending status
          <span class="p-form-help-text">Badge will only display when your snap is flaged as trending</span>
        </label>
    </div>
  </div>

  <div class="row">
    <div class="col-2">
      Preview:
    </div>
    <div class="col-7">
      <p class="snapcraft-publicise__images" id="snippet-badge-preview">
        <a href="https://snapcraft.io/{{ snap_name }}">
          <img alt="{{ snap_title }}" src="/{{ snap_name }}/badge.svg" />
        </a>
      </p>
    </div>
  </div>

  <div class="row">
    <div class="col-2">
      <label>HTML:</label>
    </div>
    <div class="col-7">
      <div class="p-code-copyable not-cli">
        <code class="p-code-copyable__input" id="snippet-badge-html">&lt;a href="https://snapcraft.io/{{ snap_name }}"&gt;
  &lt;img alt="{{ snap_title }}" src="https://snapcraft.io/{{ snap_name }}/badge.svg" /&gt;
&lt;/a&gt;</code>
        <button class="p-code-copyable__action js-clipboard-copy" data-clipboard-target="#snippet-badge-html">Copy to clipboard</button>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-2">
      <label>Markdown:</label>
    </div>
    <div class="col-7">
      <div class="p-code-copyable not-cli">
        <code class="p-code-copyable__input" id="snippet-badge-markdown">[![{{ snap_title }}](https://snapcraft.io/{{ snap_name }}/badge.svg)](https://snapcraft.io/{{ snap_name }})</code>
        <button class="p-code-copyable__action js-clipboard-copy" data-clipboard-target="#snippet-badge-markdown">Copy to clipboard</button>
      </div>
    </div>
  </div>
{% endblock %}

{% block scripts_modules %}
<script src="{{ static_url('js/modules/clipboard.min.js') }}" defer></script>
{% endblock %}

{% block scripts_includes %}
  <script src="{{ static_url('js/dist/publisher.js') }}" defer></script>
{% endblock %}

{% block scripts %}
<script>
  window.addEventListener("DOMContentLoaded", function() {
    Raven.context(function () {
      snapcraft.publisher.publicise.initGitHubBadgePicker({
        snapName: "{{ snap_name }}",
        previewElement: document.getElementById("snippet-badge-preview"),
        htmlElement: document.getElementById("snippet-badge-html"),
        markdownElement: document.getElementById("snippet-badge-markdown"),
        optionButtons: document.querySelectorAll("#js-options input[type=checkbox]")
      });

      if (typeof ClipboardJS !== 'undefined') {
        new ClipboardJS('.js-clipboard-copy');
      }
    });
  });
</script>
{% endblock %}
